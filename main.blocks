<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="TI*]la?YhUgwkz2{O9ED">message</variable><variable id="}5ep80)}uFW~MbMb)?B^">mode</variable><variable id="xn3T:/:5w5G`Ws3fBCC%">speed</variable></variables><comment id="HzWuBc#hhf~__,XGc:mT" data="0" x="0" y="0" h="200" w="160">初期処理&#10;&#10;・変数定義&#10;&#10;・アイコン表示</comment><block type="function_definition" id="J*TWNj1P}rM2o*B^X36r" x="395" y="20"><mutation name="doServo" functionid="V-/u~-gBRlQMhCR:DQdo"/><field name="function_name">doServo</field><comment pinned="false" h="80" w="160">---------------------------------------------------------------------&#10;サーボモータ動作処理&#10;・モード変数に従いサーボモータを動作させる。&#10;---------------------------------------------------------------------</comment><statement name="STACK"><block type="typescript_statement" id="wV=om2:eS!}T{jUm/Fr-" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="switch (mode) {" line1="        case MODE.up:" line2="            maqueen.servoRun(maqueen.Servos.S1, 0);" line3="            break;" line4="        case MODE.down:" line5="            maqueen.servoRun(maqueen.Servos.S1, 130);" line6="            break;" line7="        case MODE.center:" line8="            maqueen.servoRun(maqueen.Servos.S1, 90);" line9="            break;" line10="    }" numlines="11"></mutation><next><block type="device_pause" id="u0no0IM`M7t?YeECd1p("><value name="pause"><shadow type="timePicker" id="(}H4-asm]tH[]%gk]$,j"><field name="ms">1000</field></shadow></value></block></next></block></statement></block><block type="IR_callbackUser" id="yrr7.|GT6~JSvr,=bIPN" x="1032" y="20"><field name="HANDLER_message" id="TI*]la?YhUgwkz2{O9ED">message</field><comment pinned="false" h="80" w="160">---------------------------------------------------------------------&#10;リモコン受信処理&#10;・受信メッセージを動作モードとする。&#10;---------------------------------------------------------------------</comment><statement name="HANDLER"><block type="typescript_statement" id="OIk*CUWD*FknzY:mpV.s" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="switch (message) {" line1="        case MODE.advance:" line2="        case MODE.back:" line3="        case MODE.left:" line4="        case MODE.right:" line5="            basic.showIcon(IconNames.Happy, 0);" line6="            break;" line7="        case MODE.down:" line8="        case MODE.up:" line9="        case MODE.center:" line10="            basic.showIcon(IconNames.Surprised, 0);" line11="            break;" line12="        case MODE.stop:" line13="            basic.showIcon(IconNames.Asleep, 0);" line14="            break;" line15="    }" numlines="16"></mutation><next><block type="variables_set" id="0dO5y[Cch)c,|uVF3,xm"><field name="VAR" id="}5ep80)}uFW~MbMb)?B^">mode</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=",D}kN6~JA2h`kL-J}v_|"><field name="VAR" id="TI*]la?YhUgwkz2{O9ED">message</field></block></value></block></next></block></statement></block><block type="device_forever" id="d!U4UR8wmzZhM+0$7Kw9" x="1467" y="20"><comment pinned="false" h="80" w="160">---------------------------------------------------------------------&#10;メインループ処理&#10;・モード変数に従い処理関数の呼び出しを行う。&#10;---------------------------------------------------------------------</comment><statement name="HANDLER"><block type="typescript_statement" id="4d3r4SKXDMib,|kjsstf" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="switch (mode) {" line1="        case MODE.advance:" line2="        case MODE.back:" line3="        case MODE.left:" line4="        case MODE.right:" line5="            doDrive(speed);" line6="            break;" line7="        case MODE.down:" line8="        case MODE.up:" line9="        case MODE.center:" line10="            doServo();" line11="            break;" line12="        case MODE.stop:" line13="            maqueen.motorStop(maqueen.Motors.All);" line14="            break;" line15="    }" numlines="16"></mutation></block></statement></block><block type="pxt-on-start" id="+5JhJijfZDj6njrUMx8t" x="11" y="99"><statement name="HANDLER"><block type="typescript_statement" id="lV#7wbSV0MMvJM1LzZ8#" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let mode = 0" numlines="1" declaredvars="mode"></mutation><next><block type="variables_set" id="*Q3U,J`+~u))$4zB:7n:"><field name="VAR" id="xn3T:/:5w5G`Ws3fBCC%">speed</field><value name="VALUE"><shadow type="math_number" id="9}e9RrBi6KQ(P?ma|8`P"><field name="NUM">50</field></shadow></value><next><block type="typescript_statement" id="qpMFl$ehq_@+(5liHx(d" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum MODE {" line1="    advance = 1, " line2="    back = 2," line3="    left = 3," line4="    right = 4," line5="    up = 5," line6="    down = 6," line7="    center = 7," line8="    stop = 8," line9="}" numlines="10"></mutation><next><block type="typescript_statement" id="8zko]!IV5)Ic:+5I31Ho" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="basic.showIcon(IconNames.Asleep, 0);" numlines="1"></mutation></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="~.@Zfd6~XJ[{/8h4N,rq" x="1942" y="20"><mutation name="doDrive" functionid="eF=2Mrex::gB#y+M=3?^"><arg name="speed" id="4sd7w9wjzoiuaov3u4r5o" type="number"/></mutation><field name="function_name">doDrive</field><comment pinned="false" h="80" w="160">---------------------------------------------------------------------&#10;モータ動作処理（引数は回転速度）&#10;・モード変数に従いモーターを動作させる。&#10;---------------------------------------------------------------------</comment><value name="4sd7w9wjzoiuaov3u4r5o"><shadow type="argument_reporter_number" id="[b^2?(6@LtA!l/{k75t/"><field name="VALUE">speed</field></shadow></value><statement name="STACK"><block type="typescript_statement" id=";ZtvQ=s:UB$,iYh(B`S8" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="switch (mode) {" line1="        case MODE.advance:" line2="            maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, speed);" line3="            break;" line4="        case MODE.back:" line5="            maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CCW, speed);" line6="            break;" line7="        case MODE.left:" line8="            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, speed);" line9="            maqueen.motorStop(maqueen.Motors.M2);" line10="            break;" line11="        case MODE.right:" line12="            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, speed);" line13="            maqueen.motorStop(maqueen.Motors.M1);" line14="            break;" line15="    }" numlines="16"></mutation></block></statement></block></xml>